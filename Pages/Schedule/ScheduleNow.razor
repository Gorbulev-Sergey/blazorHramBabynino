@page "/schedule"
@using System.Globalization 
@inject ISchedulesService SchedulesService

<h3 class="mb-3">Расписание богослужений на @CultureInfo.GetCultureInfo("ru-RU").DateTimeFormat.GetMonthName(DateTime.Now.Month).ToLower() @DateTime.Now.Year года</h3>
<Schedule date="DateTime.Now"></Schedule>










@code {
    bool естьРасписаиниеНаТекущийМесяц=false;
    bool естьРасписаиниеНаСледующийМесяц=false;
    bool естьРасписаиниеНаПредыдущийМесяц=false;

    protected override void OnInitialized()
    {
        // Текущий месяц
        if (SchedulesService.has_schedule_in_this_date(DateTime.Now)) естьРасписаиниеНаТекущийМесяц = true;
        // Следующий месяц
        if (DateTime.Now.Month!=12)
        {
            DateTime nextDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month + 1, 1);
            if (SchedulesService.has_schedule_in_this_date(nextDate))
            {
                естьРасписаиниеНаСледующийМесяц = true;
            }
        }
        else
        {
            DateTime nextDate = new DateTime(DateTime.Now.Year+1, 1, 1);
            if (SchedulesService.has_schedule_in_this_date(nextDate))
            {
                естьРасписаиниеНаСледующийМесяц = true;
            }
        }
        // Предыдущий месяц
        if (DateTime.Now.Month != 1)
        {
            DateTime prevDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month - 1, 1);
            if (SchedulesService.has_schedule_in_this_date(prevDate))
            {
                естьРасписаиниеНаПредыдущийМесяц = true;
            }
        }
        else
        {
            DateTime prevDate = new DateTime(DateTime.Now.Year - 1, 12, 1);
            if (SchedulesService.has_schedule_in_this_date(prevDate))
            {
                естьРасписаиниеНаПредыдущийМесяц = true;
            }
        }
    }
}