@inherits LayoutComponentBase
@inject ViewBagService ViewBagService
@inject NavigationManager NavigationManager

<div class="mb-3">
    <div class="d-flex justify-content-between align-items-end">
        <h3 class="mb-1 mr-1">@PageTitle</h3>
        <div class="text-right">
            <a class="btn btn-secondary mb-1 shadow-sm" href="/news" @onclick='() => setTitle("Новости и объявления")'>Новости и объявления</a>
            <a class="btn btn-secondary mb-1 shadow-sm" href="/videos" @onclick='() => setTitle("Видео","/videos")'>Видео</a>
            <a class="btn btn-outline-secondary mb-1 shadow-sm" href="/aboutchurch" @onclick='() => setTitle("О нашем храме","/aboutchurch")'>О нашем храме</a>
            <a class="btn btn-warning mb-1 shadow-sm" href="/aboutsacraments" @onclick='() => setTitle("О Таинствах","/aboutsacraments")'>О Таинствах</a>
            <a class="btn btn-outline-secondary mb-1 shadow-sm" href="/forchoir" @onclick='() => setTitle("Для клироса","/forchoir")'>Для клироса</a>
        </div>
    </div>
</div>

<TagNavigation></TagNavigation>

@Body

@code{
    public string PageTitle { get; set; }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        if (NavigationManager.Uri == NavigationManager.BaseUri)
        {
            PageTitle = ViewBagService.PageTitle = "Новости и объявления";
        }
        else
        {
            PageTitle = ViewBagService.PageTitle;
        }
    }

    void setTitle(string title, string backUrl = "/news")
    {
        PageTitle = ViewBagService.PageTitle = title;
        ViewBagService.BackUrl = backUrl;
    }
}
